
DROP TABLE IF EXISTS `attendance_records`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `attendance_records` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `student_id` int unsigned NOT NULL,
  `session_id` int unsigned NOT NULL,
  `timestamp` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('present','late','absent') COLLATE utf8mb4_unicode_ci NOT NULL,
  `confidence` decimal(5,2) DEFAULT NULL,
  `image_url` text COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ux_unique_attendance` (`student_id`,`session_id`),
  UNIQUE KEY `uniq_student_session` (`student_id`,`session_id`),
  KEY `fk_ar_session` (`session_id`),
  CONSTRAINT `fk_ar_session` FOREIGN KEY (`session_id`) REFERENCES `attendance_sessions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_ar_student` FOREIGN KEY (`student_id`) REFERENCES `students` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `attendance_records`
--

LOCK TABLES `attendance_records` WRITE;
/*!40000 ALTER TABLE `attendance_records` DISABLE KEYS */;
INSERT INTO `attendance_records` VALUES (1,1,1,'2025-11-07 22:55:00','absent',0.00,NULL),(2,1,2,'2025-11-07 23:07:00','absent',0.00,NULL),(3,1,3,'2025-11-07 23:19:00','absent',0.00,NULL),(4,1,4,'2025-11-07 23:22:16','present',70.00,'/static/attendance_faces/B22DCCN840_20251107_232216.jpg'),(5,1,5,'2025-11-07 23:30:00','absent',0.00,NULL),(8,1,7,'2025-11-07 00:07:00','absent',0.00,NULL),(9,1,8,'2025-11-08 08:46:21','present',70.00,'/static/attendance_faces/B22DCCN840_20251108_084621.jpg'),(10,1,9,'2025-11-08 09:11:06','present',70.00,'/static/attendance_faces/B22DCCN840_20251108_091106.jpg'),(11,2,9,'2025-11-08 09:16:41','present',70.00,'/static/attendance_faces/B22DCCN001_20251108_091641.jpg'),(12,2,1,'2025-11-07 22:55:00','absent',0.00,NULL),(13,2,2,'2025-11-07 23:07:00','absent',0.00,NULL),(14,2,3,'2025-11-07 23:19:00','absent',0.00,NULL),(15,2,4,'2025-11-07 23:27:56','absent',0.00,NULL),(16,2,5,'2025-11-07 23:30:00','absent',0.00,NULL),(17,2,7,'2025-11-07 00:07:00','absent',0.00,NULL),(18,2,8,'2025-11-08 08:50:00','absent',0.00,NULL);
/*!40000 ALTER TABLE `attendance_records` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `attendance_sessions`
--

DROP TABLE IF EXISTS `attendance_sessions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `attendance_sessions` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `date` date NOT NULL,
  `session_name` enum('Sáng','Chiều') COLLATE utf8mb4_unicode_ci NOT NULL,
  `start_time` time NOT NULL,
  `end_time` time NOT NULL,
  `close_time` time DEFAULT NULL,
  `shift` int NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `attendance_sessions`
--

LOCK TABLES `attendance_sessions` WRITE;
/*!40000 ALTER TABLE `attendance_sessions` DISABLE KEYS */;
INSERT INTO `attendance_sessions` VALUES (1,'2025-11-07','Sáng','22:49:00','22:53:00','22:55:00',1),(2,'2025-11-07','Sáng','23:03:00','23:06:00','23:07:00',2),(3,'2025-11-07','Sáng','23:13:00','23:17:00','23:19:00',3),(4,'2025-11-07','Chiều','23:17:56','23:27:56','23:27:56',1),(5,'2025-11-07','Chiều','23:28:00','23:29:00','23:30:00',2),(7,'2025-11-07','Chiều','23:57:00','00:00:00','00:07:00',3),(8,'2025-11-08','Sáng','08:45:00','08:49:00','08:50:00',1),(9,'2025-11-08','Sáng','09:10:00','09:20:00','09:20:00',2);
/*!40000 ALTER TABLE `attendance_sessions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `students`
--

DROP TABLE IF EXISTS `students`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `students` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `msv` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `image_url` text COLLATE utf8mb4_unicode_ci,
  `encoding` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `msv` (`msv`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `students`
--

LOCK TABLES `students` WRITE;
/*!40000 ALTER TABLE `students` DISABLE KEYS */;
INSERT INTO `students` VALUES (1,'B22DCCN840','Nguyễn Đình Thuân','/static/students/B22DCCN840.jpg','[-0.05618873983621597, 0.09597358107566833, 0.046544600278139114, -0.03235021233558655, -0.03853602707386017, -0.07825752347707748, -0.08425669372081757, -0.14302879571914673, 0.12752555310726166, -0.05815716087818146, 0.27620983123779297, -0.04504727944731712, -0.1987263262271881, -0.1583012491464615, 0.041509564965963364, 0.17762379348278046, -0.19979296624660492, -0.14355912804603577, -0.02108321338891983, -0.02258891612291336, 0.01885334961116314, 0.008452397771179676, 0.10770812630653381, 0.04090272635221481, -0.11817507445812225, -0.34557080268859863, -0.13660839200019836, -0.12902268767356873, 0.0011001983657479286, -0.05543585494160652, -0.07813617587089539, 0.019735634326934814, -0.17113295197486877, -0.0658239796757698, 0.07539553940296173, 0.04715343564748764, -0.003200157545506954, -0.03362147510051727, 0.2627803087234497, -0.017989741638302803, -0.2185705006122589, 0.055849093943834305, 0.04719667509198189, 0.23732846975326538, 0.20212621986865997, 0.05311669409275055, 0.005023998208343983, -0.11123130470514297, 0.11440151929855347, -0.08889170736074448, 0.13317225873470306, 0.16607961058616638, 0.10505431145429611, 0.040613703429698944, -0.02060016803443432, -0.11862673610448837, -0.025235548615455627, 0.10997923463582993, -0.10980259627103806, 0.0036425122525542974, 0.07227709144353867, -0.04778153449296951, -0.04054974764585495, -0.035169992595911026, 0.2356552928686142, 0.08228148519992828, -0.12858349084854126, -0.18734955787658691, 0.10074721276760101, -0.11848597228527069, -0.10112404078245163, 0.06834627687931061, -0.23574596643447876, -0.1578063666820526, -0.3132266104221344, 0.017695927992463112, 0.3617393672466278, -0.011130423285067081, -0.251717209815979, 0.0203891322016716, -0.026294300332665443, -0.029144400730729103, 0.10125509649515152, 0.18916665017604828, -0.02007138356566429, 0.032047443091869354, -0.0717247724533081, -0.006106557324528694, 0.23537151515483856, -0.0858059823513031, -0.07411471009254456, 0.23349983990192413, -0.01382073387503624, 0.14685240387916565, 0.05004221946001053, 0.015088248066604137, 0.03818942978978157, 0.0048444862477481365, -0.1455710232257843, 0.0025059105828404427, 0.05104897543787956, -0.009318891912698746, -0.06172537803649902, 0.12539121508598328, -0.16272714734077454, 0.08411978930234909, 0.060958895832300186, 0.045216917991638184, 0.02000773698091507, 0.057991016656160355, -0.08883225172758102, -0.1552324891090393, 0.137125164270401, -0.22466646134853363, 0.2302643060684204, 0.2008509337902069, 0.06411818414926529, 0.07349436730146408, 0.0720629170536995, 0.08948422968387604, 0.010021292604506016, 0.013585994020104408, -0.20267853140830994, 0.006549087353050709, 0.11244117468595505, 0.018437139689922333, 0.08765272051095963, 0.03287617489695549]','2025-11-07 22:49:07'),(2,'B22DCCN001','Bùi Mạnh Hùng','/static/students/B22DCCN001.jpg','[-0.03382302075624466, 0.08175647258758545, 0.07882405072450638, -0.044121451675891876, -0.02253180369734764, 0.0012709582224488258, -0.07512756437063217, -0.06945736706256866, 0.07029609382152557, -0.12216909229755402, 0.3038765788078308, -0.023884549736976624, -0.14604449272155762, -0.11307208985090256, -0.002958357334136963, 0.19823294878005981, -0.19047918915748596, -0.12961167097091675, -0.02043675072491169, -0.043444763869047165, 0.06783922016620636, -0.019073493778705597, -0.009650549851357937, 0.009931070730090141, -0.15218332409858704, -0.3336944580078125, -0.06182899326086044, -0.0818321630358696, 0.017171673476696014, -0.0414302833378315, -0.0270757507532835, 0.05019887164235115, -0.18533965945243835, -0.012693097814917564, 0.07705426961183548, 0.053365133702754974, -0.021918850019574165, -0.023076802492141724, 0.1641831398010254, 0.003943120129406452, -0.22222352027893066, 0.10699362307786942, 0.07914520800113678, 0.2456318736076355, 0.1851263791322708, 0.1054287850856781, 0.012858781963586807, -0.08518010377883911, 0.13511253893375397, -0.20437796413898468, 0.11138470470905304, 0.10680219531059265, 0.10572484135627747, 0.048487477004528046, 0.03178630769252777, -0.1721094846725464, -0.01118133682757616, 0.12216181308031082, -0.15239030122756958, 0.061262793838977814, 0.0267682783305645, -0.05514908581972122, 0.002556093968451023, -0.0910908505320549, 0.21251340210437775, 0.11655990034341812, -0.1544785052537918, -0.17793932557106018, 0.17468002438545227, -0.07756681740283966, -0.09913910925388336, 0.04307417944073677, -0.15758632123470306, -0.16848987340927124, -0.31837430596351624, 0.049620553851127625, 0.3712150454521179, 0.12099240720272064, -0.18915842473506927, 0.029612069949507713, 0.006356923840939999, 0.00603216839954257, 0.0760170966386795, 0.1666530817747116, -0.028362028300762177, -0.026339363306760788, -0.022158432751893997, -0.017471840605139732, 0.20762228965759277, 0.0006931116804480553, -0.09872850775718689, 0.20627930760383606, -0.09070426970720291, 0.08376866579055786, -0.025173448026180267, 0.011741964146494865, -0.10215549170970917, 0.03388507291674614, -0.1638393998146057, -0.07759971171617508, -0.017569757997989655, -0.007958550937473774, -0.016414105892181396, 0.20295865833759308, -0.1865232288837433, 0.15514442324638367, -0.052674826234579086, 0.06695707142353058, 0.022383764386177063, 0.11721084266901016, -0.07120486348867416, -0.013436829671263695, 0.06532957404851913, -0.2245609313249588, 0.2512141764163971, 0.20640839636325836, 0.13860858976840973, 0.07788840681314468, 0.18352293968200684, 0.005387929268181324, 0.06538686901330948, -0.0209808349609375, -0.299131840467453, -0.06004111468791962, 0.07010659575462341, -0.06637796014547348, 0.09314711391925812, 0.03807620704174042]','2025-11-08 09:10:44');
/*!40000 ALTER TABLE `students` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-11-08 10:48:28
